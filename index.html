<!DOCTYPE html>
<html lang="en">
  <head>
    <title>impulsAR</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="style.css" />
    <!-- The following libraries and polyfills are recommended to maximize browser support -->
    <!-- NOTE: you must adjust the paths as appropriate for your project -->
    <!-- 💁 OPTIONAL: The :focus-visible polyfill removes the focus ring for some input types -->
    <script
      src="https://unpkg.com/focus-visible@5.0.2/dist/focus-visible.js"
      defer
    ></script>
  </head>
  <body>
    <div id="carousel">
      <div class="model-container">
        <model-viewer
          id="model1"
          src=""
          ios-src=""
          poster="imagen de carga"
          alt="texto alternativo"
          shadow-intensity="1"
          camera-controls
          auto-rotate
          ar
        >
        </model-viewer>
      </div>
    </div>
    <section class="color-selection-container">
      <h2>colores</h2>
      <div class="color-selection">
        <div class="color-option"></div>
        <div class="color-option"></div>
        <div class="color-option"></div>
        <div class="color-option"></div>
        <div class="color-option"></div>
      </div>
    </section>
    <div class="attribution">
      <button class="arrow-button" onclick="prevModel()">
        <img src="" alt="Imagen anterior" />
        ◄
      </button>
      <button class="arrow-button" onclick="nextModel()">
        ►
        <img src="" alt="Siguiente imagen" />
      </button>
    </div>
     <!-- 💁 Include both scripts below to support all browsers!
    Loads <model-viewer> for modern browsers: -->
    <script
      type="module"
      src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"
    ></script>

    <script src="./script.js"></script>
    <script src="./data.js"></script>
    <script>
      const carousel = document.getElementById("carousel");
      const modelContainer = carousel.querySelector(".model-container");
      const modelViewer = modelContainer.querySelector("model-viewer");

      let currentModelIndex = 0;

      function prevModel() {
        currentModelIndex = (currentModelIndex - 1 + modelos.length) % modelos.length;
        updateModel();
        if (currentModelIndex > 0) {
          currentModelIndex--;
          let imgElement = document.querySelector('.attribution .arrow-button img');
          imgElement.src = `img          l${currentModelIndex}.png`;
        }
      }

      function nextModel() {
        currentModelIndex = (currentModelIndex + 1) % modelos.length;
        updateModel();
        if (currentModelIndex < modelos.length - 1) { // assuming totalModels is the total number of models
          currentModelIndex++;
          let imgElement = document.querySelector('.attribution .arrow-button img');
          imgElement.src = `imgNextModel${currentModelIndex}.png`;
        }
      }

      function updateModel() {
        const currentModel = modelos[currentModelIndex];
        modelViewer.setAttribute("src", currentModel.src);
        modelViewer.setAttribute("ios-src", currentModel.iosSrc);
        modelViewer.setAttribute("poster", currentModel.poster);
        modelViewer.setAttribute("alt", currentModel.alt);
        modelViewer.setAttribute("shadow-intensity", currentModel.shadowIntensity);
        modelViewer.setAttribute("camera-controls", currentModel.cameraControls);
        modelViewer.setAttribute("auto-rotate", currentModel.autoRotate);
        modelViewer.setAttribute("ar", currentModel.ar);
        modelContainer.style.animation = "transformX 0.5s ease-in-out";
        setTimeout(() => {
          modelContainer.style.animation = "";
        }, 500);
      }

      updateModel();
    </script>
  </body>
</html>